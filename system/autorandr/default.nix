let
  eDP1-edid =
    "00ffffffffffff0030e41907a103000900200104a51b127803ef70a7514ca8260e4f5300000001010101010101010101010101010101de8a4078b08037703020550012b71000001a000000fd001e78f0f048010a202020202020000000fe004c47445f4d50312e305f0a2020000000fe004c503132395754322d53504136010970137900000301145f1701083f0b630007801f007f074f004100070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006d90";
  DP3-edid =
    "00ffffffffffff0004724707b28d31042b1e0104b53e22783bad65ad50459f250e50542308008140818081c081009500b300d1c001014dd000a0f0703e80302035006d552100001a565e00a0a0a02950302035006d552100001e000000fd00283ca0a03c010a202020202020000000fc0056473238304b0a2020202020200183020339f150010304121305141f9007025d5e5f60612309070783010000e200d56d030c0010003878200060010203e305e301e6060701606045023a801871382d40582c45006d552100001e011d007251d01e206e2855006d552100001e8c0ad08a20e02d10103e96006d55210000180000000000000000000000000000000011";
in {
  config = {
    services.autorandr = {
      defaultTarget = "laptop";
      enable = true;
      profiles = {
        "laptop" = {
          fingerprint = { eDP1 = eDP1-edid; };
          config = {
            eDP1 = {
              enable = true;
              crtc = 0;
              primary = true;
              position = "0x0";
              mode = "2880x1920";
              rate = "60.00";
            };
          };
        };
        "desk" = {
          fingerprint = {
            eDP1 = eDP1-edid;
            DP3 = DP3-edid;
          };
          config = {
            eDP1.enable = false;
            DP3 = {
              enable = true;
              crtc = 1;
              primary = true;
              position = "0x0";
              mode = "3840x2160";
              rate = "60.00";
            };
          };
        };
      };
    };
  };
}
