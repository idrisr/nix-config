if !has('win')
    set slowfs=curlftpfs
endif

fileviewer */ lsd --tree --depth 2 --almost-all --ignore-glob .git %c
filextype *.pdf,*.epub zathura %c %i &, apvlv %c, xpdf %c

filextype *mkv,*webm,*mp4,*mov,*avi,*m4v
        \ haruna %f 2>/dev/null &

fileviewer *
        \ scope %c %px %py %pw %ph
        \ %pc
        \ cleaner
filextype *.bmp,*.jpg,*.jpeg,*.png,*.gif,*.xpm,*.JPG
        \ {View in sxiv}
        \ sxiv -ia %f &,

" Toggle visibility of preview window
nnoremap w :view<cr>
nnoremap sv :source $MYVIFMRC<cr>
vnoremap w :view<cr>gv
nnoremap ;q :q <CR>
nnoremap S :sort <CR>
nnoremap O :!nvim %f<cr> " open file in running nvim instance
nnoremap bg :!feh --bg-max %f<cr>

command! FZFfind : set quickview
                \| let $FZF_PICK = term('find | fzf 2>/dev/tty --preview ' . "'" . '/home/hippoid/.config/vifm/scripts/scope {} 96 2 89 54' . "'")
                \| if $FZF_PICK != ''
                \|     execute 'goto' fnameescape($FZF_PICK)
                \| endif

" variation that automatically enters directories
command! FZFlocate : set quickview
                  \| let $FZF_PICK = term('find | fzf 2>/dev/tty')
                  \| if $FZF_PICK != ''
                  \|     execute system('[ -f "$FZF_PICK" ] && echo goto || echo cd') fnameescape($FZF_PICK)
                  \| endif

nnoremap <c-g> :FZFlocate<cr>
nnoremap <c-f> :FZFfind<cr>

" :com[mand][!] command_name action
" The following macros can be used in a command
" %a is replaced with the user arguments.
" %c the current file under the cursor.
" %C the current file under the cursor in the other directory.
" %f the current selected file, or files.
" %F the current selected file, or files in the other directory.
" %b same as %f %F.
" %d the current directory name.
" %D the other window directory name.
" %m run the command in a menu window
" command! df df -h %m 2> /dev/null
" command! diff vim -d %f %F
" command! zip zip -r %f.zip %f
" command! run !! ./%f
" command! make !!make %a
" command! mkcd :mkdir %a | cd %a
" command! vgrep vim "+grep %a"
" command! reload :write | restart
" command! mkd :mkdir %a
" command! mkf :touch %a
" https://gitlab.com/linuxdabbler/dotfiles/-/blob/main/.config/vifm/vifmrc?ref_type=heads
